Û
cD:\Users\VYU21\source\repos\AlejandroGarc√≠aMalo\AlejandroGarciaMalo\Model\Factoria\FactoriaBase.cs
	namespace 	
AlejandroGarciaMalo
 
. 
Model #
.# $
Factoria$ ,
{ 
public 

abstract 
class 
FactoriaBase &
{ 
public 
abstract 
void 
CrearObjeto (
(( )
)) *
;* +
} 
} Ã
fD:\Users\VYU21\source\repos\AlejandroGarc√≠aMalo\AlejandroGarciaMalo\Model\Factoria\FactoriaRebelde.cs
	namespace 	
AlejandroGarciaMalo
 
. 
Model #
.# $
Factoria$ ,
{ 
public		 

class		 
FactoriaRebelde		  
:		! "
FactoriaBase		# /
{

 
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Planeta 
{ 
get  #
;# $
set% (
;( )
}* +
public 
DateTime 
Registro  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
FactoriaRebelde 
( 
string %
nombre& ,
,, -
string. 4
planeta5 <
,< =
DateTime> F
registroG O
)O P
{ 	
Nombre 
= 
nombre 
; 
Planeta 
= 
planeta 
; 
Registro 
= 
registro 
;  
CrearObjeto 
( 
) 
; 
} 	
public 
sealed 
override 
void #
CrearObjeto$ /
(/ 0
)0 1
{ 	
var 
rebelde 
= 
new 
Rebelde %
(% &
Nombre& ,
,, -
Planeta. 5
,5 6
Registro7 ?
)? @
;@ A
if 
( 
Listas 
. 
RebeldesRegistrados *
!=+ -
null. 2
&&3 5
!6 7
Listas7 =
.= >
RebeldesRegistrados> Q
.Q R
ExistsR X
(X Y
cY Z
=>[ ]
c^ _
._ `
Nombre` f
.f g
Equalsg m
(m n
rebelden u
.u v
Nombrev |
)| }
)} ~
)~ 
{ 
Listas 
. 
RebeldesRegistrados *
.* +
Add+ .
(. /
rebelde/ 6
)6 7
;7 8
} 
} 	
}   
public"" 

class"" 
Listas"" 
{## 
public$$ 
static$$ 
List$$ 
<$$ 
Rebelde$$ "
>$$" #
RebeldesRegistrados$$$ 7
=$$8 9
new$$: =
List$$> B
<$$B C
Rebelde$$C J
>$$J K
($$K L
)$$L M
;$$M N
}%% 
}&& ˇ
UD:\Users\VYU21\source\repos\AlejandroGarc√≠aMalo\AlejandroGarciaMalo\Model\Rebelde.cs
	namespace 	
AlejandroGarciaMalo
 
. 
Model #
{ 
public 

class 
Rebelde 
{ 
public 
Rebelde 
( 
string 
nombre $
,$ %
string& ,
planeta- 4
,4 5
DateTime6 >
registro? G
)G H
{		 	
Nombre

 
=

 
nombre

 
;

 
Planeta 
= 
planeta 
; 
Registro 
= 
registro 
;  
} 	
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Planeta 
{ 
get  #
;# $
set% (
;( )
}* +
public 
DateTime 
Registro  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
string 
ConvertToString %
(% &
)& '
{ 	
var 
stringBuilder 
= 
new  #
StringBuilder$ 1
(1 2
)2 3
;3 4
stringBuilder 
. 
Append 
( 
Nombre 
) 
.  
Append  &
(& '
$str' *
)* +
. 
Append 
( 
Planeta 
)  
.  !
Append! '
(' (
$str( +
)+ ,
. 
Append 
( 
Registro  
)  !
;! "
var 

strRebelde 
= 
stringBuilder *
.* +
ToString+ 3
(3 4
)4 5
;5 6
stringBuilder 
. 
Clear 
(  
)  !
;! "
return 

strRebelde 
; 
}   	
}!! 
}"" Ì
fD:\Users\VYU21\source\repos\AlejandroGarc√≠aMalo\AlejandroGarciaMalo\Model\Repositorio\IRepositorio.cs
	namespace 	
AlejandroGarciaMalo
 
. 
Model #
.# $
Repositorio$ /
{ 
public 

	interface 
IRepositorio !
{ 
List 
< 
Rebelde 
> 
ObtenerTodos "
(" #
)# $
;$ %
void 
Insertar 
( 
Rebelde 
rebelde %
)% &
;& '
void		 
	Modificar		 
(		 
Rebelde		 
rebelde		 &
)		& '
;		' (
bool

 
Exists

 
(

 
Rebelde

 
rebelde

 #
)

# $
;

$ %
} 
} ¡M
eD:\Users\VYU21\source\repos\AlejandroGarc√≠aMalo\AlejandroGarciaMalo\Model\Repositorio\Repositorio.cs
	namespace 	
AlejandroGarciaMalo
 
. 
Model #
.# $
Repositorio$ /
{		 
public

 

class

 
Repositorio

 
:

 
IRepositorio

 +
{ 
private 
const 
string 
Path !
=" #
$str$ :
;: ;
public 
List 
< 
Rebelde 
> 
ObtenerTodos )
() *
)* +
{ 	
var 
listRebelde 
= 
new !
List" &
<& '
Rebelde' .
>. /
(/ 0
)0 1
;1 2
if 
( 
! 
File 
. 
Exists 
( 
Path !
)! "
)" #
{ 
return 
listRebelde "
;" #
} 
try 
{ 
using 
( 
var 
reader !
=" #
File$ (
.( )
OpenText) 1
(1 2
Path2 6
)6 7
)7 8
{ 
string 
line 
;  
while 
( 
( 
line  
=! "
reader# )
.) *
ReadLine* 2
(2 3
)3 4
)4 5
!=6 8
null9 =
)= >
{ 
var 
rebelde #
=$ %
line& *
.* +
Split+ 0
(0 1
$char1 4
)4 5
;5 6
if!! 
(!! 
rebelde!! #
.!!# $
Length!!$ *
!=!!+ -
$num!!. /
)!!/ 0
continue!!1 9
;!!9 :
if## 
(## 
DateTime## $
.##$ %
TryParse##% -
(##- .
rebelde##. 5
[##5 6
$num##6 7
]##7 8
,##8 9
out##: =
var##> A

dtRegistro##B L
)##L M
)##M N
{$$ 
var%% 
factoriaRebelde%%  /
=%%0 1
new%%2 5
FactoriaRebelde%%6 E
(%%E F
rebelde%%F M
[%%M N
$num%%N O
]%%O P
,%%P Q
rebelde%%R Y
[%%Y Z
$num%%Z [
]%%[ \
,%%\ ]

dtRegistro%%^ h
)%%h i
;%%i j
listRebelde&& '
.&&' (
Add&&( +
(&&+ ,
new&&, /
Rebelde&&0 7
(&&7 8
rebelde&&8 ?
[&&? @
$num&&@ A
]&&A B
,&&B C
rebelde&&D K
[&&K L
$num&&L M
]&&M N
,&&N O

dtRegistro&&P Z
)&&Z [
)&&[ \
;&&\ ]
}'' 
else(( 
{)) 
Utiles** "
.**" #
Log**# &
.**& '
Error**' ,
(**, -
$"**- / 
Imposible convertir **/ C
{**C D
rebelde**D K
[**K L
$num**L M
]**M N
}**N O
 a DateTime**O Z
"**Z [
)**[ \
;**\ ]
}++ 
},, 
}-- 
}.. 
catch// 
(// 
	Exception// 
e// 
)// 
{00 
Utiles11 
.11 
Log11 
.11 
Error11  
(11  !
$"11! #)
Error ocurrido en el m√©todo 11# ?
{11? @
nameof11@ F
(11F G
ObtenerTodos11G S
)11S T
}11T U
. Excepci√≥n 11U a
{11a b
e11b c
}11c d
"11d e
)11e f
;11f g
throw22 
;22 
}33 
return66 
listRebelde66 
;66 
}77 	
public99 
void99 
Insertar99 
(99 
Rebelde99 $
rebelde99% ,
)99, -
{:: 	
using;; 
(;; 
var;; 
writer;; 
=;; 
File;;  $
.;;$ %

AppendText;;% /
(;;/ 0
Path;;0 4
);;4 5
);;5 6
{<< 
writer== 
.== 
	WriteLine==  
(==  !
rebelde==! (
.==( )
ConvertToString==) 8
(==8 9
)==9 :
)==: ;
;==; <
}>> 
}?? 	
publicAA 
voidAA 
	ModificarAA 
(AA 
RebeldeAA %
rebeldeAA& -
)AA- .
{BB 	
stringCC 
[CC 
]CC 
rowsCC 
;CC 
tryEE 
{FF 
usingGG 
(GG 
varGG 
srGG 
=GG 
newGG  #
StreamReaderGG$ 0
(GG0 1
PathGG1 5
)GG5 6
)GG6 7
{HH 
rowsII 
=II 
RegexII  
.II  !
SplitII! &
(II& '
srII' )
.II) *
	ReadToEndII* 3
(II3 4
)II4 5
,II5 6
$strII7 =
)II= >
;II> ?
}JJ 
}KK 
catchLL 
(LL 
	ExceptionLL 
eLL 
)LL 
{MM 
UtilesNN 
.NN 
LogNN 
.NN 
ErrorNN  
(NN  !
$"NN! #)
Error ocurrido en el m√©todo NN# ?
{NN? @
nameofNN@ F
(NNF G
	ModificarNNG P
)NNP Q
}NNQ R
. Excepci√≥n NNR ^
{NN^ _
eNN_ `
}NN` a
"NNa b
)NNb c
;NNc d
throwOO 
;OO 
}PP 
ifRR 
(RR 
!RR 
ExistsRR 
(RR 
rebeldeRR 
)RR  
)RR  !
returnRR" (
;RR( )
usingTT 
(TT 
varTT 
swTT 
=TT 
newTT 
StreamWriterTT  ,
(TT, -
PathTT- 1
)TT1 2
)TT2 3
{UU 
forVV 
(VV 
varVV 
iVV 
=VV 
$numVV 
;VV 
iVV  !
<VV" #
rowsVV$ (
.VV( )
LengthVV) /
;VV/ 0
iVV1 2
++VV2 4
)VV4 5
{WW 
ifXX 
(XX 
rowsXX 
[XX 
iXX 
]XX 
.XX  
ContainsXX  (
(XX( )
rebeldeXX) 0
.XX0 1
NombreXX1 7
)XX7 8
)XX8 9
{YY 
varZZ 
listRebeldeZZ '
=ZZ( )
rowsZZ* .
[ZZ. /
iZZ/ 0
]ZZ0 1
.ZZ1 2
SplitZZ2 7
(ZZ7 8
$charZZ8 ;
)ZZ; <
;ZZ< =
if\\ 
(\\ 
listRebelde\\ '
.\\' (
Length\\( .
!=\\/ 1
$num\\2 3
)\\3 4
continue\\5 =
;\\= >
var^^ 

rowReplace^^ &
=^^' (
rows^^) -
[^^- .
i^^. /
]^^/ 0
.^^0 1
Replace^^1 8
(__ 
listRebelde`` '
[``' (
$num``( )
]``) *
,``* +
rebeldeaa #
.aa# $
Planetaaa$ +
)bb 
;bb 
rowsdd 
[dd 
idd 
]dd 
=dd  !

rowReplacedd" ,
;dd, -
stringff 
dateRegistroff +
;ff+ ,
trygg 
{hh 
dateRegistroii (
=ii) *
rebeldeii+ 2
.ii2 3
Registroii3 ;
.ii; <
ToStringii< D
(iiD E
$striiE Z
,iiZ [
CultureInfoii\ g
.iig h
InvariantCultureiih x
)iix y
;iiy z
}jj 
catchkk 
(kk 
	Exceptionkk (
ekk) *
)kk* +
{ll 
Utilesmm "
.mm" #
Logmm# &
.mm& '
Errormm' ,
(mm, -
$"mm- /)
Error ocurrido en el m√©todo mm/ K
{mmK L
nameofmmL R
(mmR S
	ModificarmmS \
)mm\ ]
}mm] ^
. Excepci√≥n mm^ j
{mmj k
emmk l
}mml m
"mmm n
)mmn o
;mmo p
thrownn !
;nn! "
}oo 

rowReplaceqq "
=qq# $
rowsqq% )
[qq) *
iqq* +
]qq+ ,
.qq, -
Replaceqq- 4
(rr 
listRebeldess '
[ss' (
$numss( )
]ss) *
,ss* +
dateRegistross, 8
)tt 
;tt 
rowsvv 
[vv 
ivv 
]vv 
=vv  !

rowReplacevv" ,
;vv, -
}xx 
swzz 
.zz 
	WriteLinezz  
(zz  !
rowszz! %
[zz% &
izz& '
]zz' (
)zz( )
;zz) *
}{{ 
}|| 
}}} 	
public 
bool 
Exists 
( 
Rebelde "
rebelde# *
)* +
{
ÄÄ 	
return
ÅÅ 
File
ÅÅ 
.
ÅÅ 
Exists
ÅÅ 
(
ÅÅ 
Path
ÅÅ #
)
ÅÅ# $
&&
ÅÅ% '
ObtenerTodos
ÅÅ( 4
(
ÅÅ4 5
)
ÅÅ5 6
.
ÅÅ6 7
Exists
ÅÅ7 =
(
ÅÅ= >
r
ÅÅ> ?
=>
ÅÅ@ B
r
ÅÅC D
.
ÅÅD E
Nombre
ÅÅE K
.
ÅÅK L
Equals
ÅÅL R
(
ÅÅR S
rebelde
ÅÅS Z
.
ÅÅZ [
Nombre
ÅÅ[ a
)
ÅÅa b
)
ÅÅb c
;
ÅÅc d
}
ÇÇ 	
}
ÑÑ 
}ÖÖ ä
_D:\Users\VYU21\source\repos\AlejandroGarc√≠aMalo\AlejandroGarciaMalo\Properties\AssemblyInfo.cs
[ 
assembly 	
:	 

AssemblyTitle 
( 
$str .
). /
]/ 0
[ 
assembly 	
:	 

AssemblyDescription 
( 
$str !
)! "
]" #
[		 
assembly		 	
:			 
!
AssemblyConfiguration		  
(		  !
$str		! #
)		# $
]		$ %
[

 
assembly

 	
:

	 

AssemblyCompany

 
(

 
$str

 
)

 
]

 
[ 
assembly 	
:	 

AssemblyProduct 
( 
$str 0
)0 1
]1 2
[ 
assembly 	
:	 

AssemblyCopyright 
( 
$str 0
)0 1
]1 2
[ 
assembly 	
:	 

AssemblyTrademark 
( 
$str 
)  
]  !
[ 
assembly 	
:	 

AssemblyCulture 
( 
$str 
) 
] 
[ 
assembly 	
:	 


ComVisible 
( 
false 
) 
] 
[ 
assembly 	
:	 

Guid 
( 
$str 6
)6 7
]7 8
[!! 
assembly!! 	
:!!	 

AssemblyVersion!! 
(!! 
$str!! $
)!!$ %
]!!% &
["" 
assembly"" 	
:""	 

AssemblyFileVersion"" 
("" 
$str"" (
)""( )
]"") *á
ND:\Users\VYU21\source\repos\AlejandroGarc√≠aMalo\AlejandroGarciaMalo\Utiles.cs
	namespace 	
AlejandroGarciaMalo
 
{ 
public 

static 
class 
Utiles 
{ 
public 
static 
readonly 
log4net &
.& '
ILog' +
Log, /
= 
log4net 
. 

LogManager  
.  !
	GetLogger! *
(* +
System+ 1
.1 2

Reflection2 <
.< =

MethodBase= G
.G H
GetCurrentMethodH X
(X Y
)Y Z
.Z [
DeclaringType[ h
)h i
;i j
} 
} ∆6
^D:\Users\VYU21\source\repos\AlejandroGarc√≠aMalo\AlejandroGarciaMalo\WebServiceImperio.asmx.cs
	namespace 	
AlejandroGarciaMalo
 
{		 
[ 

WebService 
( 
	Namespace 
= 
$str 1
)1 2
]2 3
[ 
WebServiceBinding 
( 

ConformsTo !
=" #
WsiProfiles$ /
./ 0
BasicProfile1_10 ?
)? @
]@ A
[ 
System 
. 
ComponentModel 
. 
ToolboxItem &
(& '
false' ,
), -
]- .
public 

class 
WebServiceImperio "
:# $

WebService% /
{ 
private 
static 

IContainer !
ContainerDependency" 5
{6 7
get8 ;
;; <
set= @
;@ A
}B C
public 
WebServiceImperio  
(  !
)! "
{ 	
var 
builder 
= 
new 
ContainerBuilder .
(. /
)/ 0
;0 1
builder 
. 
RegisterType  
<  !
Repositorio! ,
>, -
(- .
). /
./ 0
As0 2
<2 3
IRepositorio3 ?
>? @
(@ A
)A B
;B C
ContainerDependency 
=  !
builder" )
.) *
Build* /
(/ 0
)0 1
;1 2
} 	
[ 	
	WebMethod	 
] 
public 
bool 
InsertarRebeldes $
($ %
List% )
<) *
string* 0
>0 1
rebeldes2 :
): ;
{ 	
foreach   
(   
var   
rebelde    
in  ! #
rebeldes  $ ,
)  , -
{!! 
var"" 
listRebelde"" 
=""  !
rebelde""" )
."") *
Split""* /
(""/ 0
$char""0 3
)""3 4
;""4 5
if$$ 
($$ 
DateTime$$ 
.$$ 
TryParse$$ %
($$% &
listRebelde$$& 1
[$$1 2
$num$$2 3
]$$3 4
,$$4 5
out$$6 9
var$$: =

dtRegistro$$> H
)$$H I
)$$I J
{%% 
var&& 
factoriaRebelde&& '
=&&( )
new&&* -
FactoriaRebelde&&. =
(&&= >
listRebelde&&> I
[&&I J
$num&&J K
]&&K L
,&&L M
listRebelde&&N Y
[&&Y Z
$num&&Z [
]&&[ \
,&&\ ]

dtRegistro&&^ h
)&&h i
;&&i j
}'' 
else(( 
{)) 
Utiles** 
.** 
Log** 
.** 
Error** $
(**$ %
$"**% ' 
Imposible convertir **' ;
{**; <
listRebelde**< G
[**G H
$num**H I
]**I J
}**J K
 a DateTime**K V
"**V W
)**W X
;**X Y
return++ 
false++  
;++  !
},, 
}-- 
using// 
(// 
var// 
scope// 
=// 
ContainerDependency// 2
.//2 3
BeginLifetimeScope//3 E
(//E F
)//F G
)//G H
{00 
var11 
repositorio11 
=11  !
scope11" '
.11' (
Resolve11( /
<11/ 0
IRepositorio110 <
>11< =
(11= >
)11> ?
;11? @
foreach33 
(33 
var33 
rebelde33 $
in33% '
Listas33( .
.33. /
RebeldesRegistrados33/ B
)33B C
{44 
if55 
(55 
!55 
repositorio55 $
.55$ %
Exists55% +
(55+ ,
rebelde55, 3
)553 4
)554 5
{66 
repositorio77 #
.77# $
Insertar77$ ,
(77, -
rebelde77- 4
)774 5
;775 6
}88 
else99 
{:: 
Utiles;; 
.;; 
Log;; "
.;;" #
Info;;# '
(;;' (
$"<< 
El rebelde << )
{<<) *
rebelde<<* 1
.<<1 2
Nombre<<2 8
}<<8 9C
7 ya existe en el registro. Se proceder√° a modificarlo.<<9 o
"<<o p
)<<p q
;<<q r
repositorio== #
.==# $
	Modificar==$ -
(==- .
rebelde==. 5
)==5 6
;==6 7
}>> 
}?? 
}@@ 
returnBB 
trueBB 
;BB 
}CC 	
[EE 	
	WebMethodEE	 
]EE 
publicFF 
ListFF 
<FF 
stringFF 
>FF 
ObtenerRebeldesFF +
(FF+ ,
)FF, -
{GG 	
usingHH 
(HH 
varHH 
scopeHH 
=HH 
ContainerDependencyHH 2
.HH2 3
BeginLifetimeScopeHH3 E
(HHE F
)HHF G
)HHG H
{II 
varJJ 
repositorioJJ 
=JJ  !
scopeJJ" '
.JJ' (
ResolveJJ( /
<JJ/ 0
IRepositorioJJ0 <
>JJ< =
(JJ= >
)JJ> ?
;JJ? @
ListasLL 
.LL 
RebeldesRegistradosLL *
=LL+ ,
repositorioLL- 8
.LL8 9
ObtenerTodosLL9 E
(LLE F
)LLF G
;LLG H
varNN 
listStRebeldesNN "
=NN# $
newNN% (
ListNN) -
<NN- .
stringNN. 4
>NN4 5
(NN5 6
)NN6 7
;NN7 8
ifPP 
(PP 
ListasPP 
.PP 
RebeldesRegistradosPP .
==PP/ 1
nullPP2 6
||PP7 9
ListasPP: @
.PP@ A
RebeldesRegistradosPPA T
.PPT U
CountPPU Z
==PP[ ]
$numPP^ _
)PP_ `
{QQ 
returnRR 
listStRebeldesRR )
;RR) *
}SS 
foreachUU 
(UU 
varUU 
rebeldeUU $
inUU% '
ListasUU( .
.UU. /
RebeldesRegistradosUU/ B
)UUB C
{VV 
varWW 

strRebeldeWW "
=WW# $
rebeldeWW% ,
.WW, -
ConvertToStringWW- <
(WW< =
)WW= >
;WW> ?
listStRebeldesXX "
.XX" #
AddXX# &
(XX& '

strRebeldeXX' 1
)XX1 2
;XX2 3
}YY 
return[[ 
listStRebeldes[[ %
;[[% &
}\\ 
}]] 	
}^^ 
}__ 